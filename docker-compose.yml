version: "3.1" 

services:
  #apt-cacher-ng:
    #container_name: apt_cacher
    #build: ./apt_cacher_ng
    #ports:
    #  - "3142:3142"
    #volumes:
    #  - /var/run/avahi-daemon/socket:/var/run/avahi-daemon/socket
    #  - ./cache:/var/cache/apt-cacher-ng

  apt-cacher-ng:
    image: sameersbn/apt-cacher-ng
    container_name: apt-cacher-ng
    ports:
      - "3142:3142"
    volumes:
      - ./cache:/var/cache/apt-cacher-ng
    restart: always
  
  ansible:
    build: ./ansible
    container_name: ansible
    tty: true
    stdin_open: true

    network_mode: host

    environment:
      DOCKER_HOST: "CaptainMcCrank.local"

    volumes:
      - /home/patrickmccanna/Development/DockerVolume/:/home/pi/Playbooks
      - /var/run/avahi-daemon/socket:/var/run/avahi-daemon/socket

volumes:
  apt-cacher-ng: